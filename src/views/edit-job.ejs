<h1 class="text-center text-secondary">Update this Job</h1>

<% if (errors) { %>
  <% errors.forEach(error => { %>
   <div class="alert alert-danger" role="alert">
     <%= error.msg %>
   </div>
  <% }) %>
 <% } %>

<form action="/edit-job" method="POST" class="row g-3 text-secondary">
  <input
    type="hidden"
    class="form-control"
    id="id"
    name="id"
    value="<%= job.id %>"
  />
  <div class="col-12">
    <select
      class="form-select text-secondary"
      aria-label="Job Category"
      name="category"
    >
      <option class="text-secondary">Select job category</option>
      <option value="Tech" class="text-secondary" <%= job.category === 'Tech' ? 'selected' : '' %>>Tech</option>
      <option value="Non-Tech" class="text-secondary" <%= job.category === 'Non-Tech' ? 'selected' : '' %>>Non-Tech</option>
    </select>
  </div>
  <div class="col-12">
    <select
      class="form-select text-secondary"
      aria-label="Job Designation"
      name="position"
    >
      <option class="text-secondary">Select job designation</option>
      <option value="HR" class="text-secondary" <%= job.position === 'HR' ? 'selected' : '' %>>HR</option>
      <option value="SDE" class="text-secondary" <%= job.position === 'SDE' ? 'selected' : '' %>>SDE</option>
      <option value="DevOps" class="text-secondary" <%= job.position === 'DevOps' ? 'selected' : '' %>>DevOps</option>
      <option value="MERN Developer" class="text-secondary" <%= job.position === 'MERN Developer' ? 'selected' : '' %>>MERN Developer</option>
      <option value="MEAN Developer" class="text-secondary" <%= job.position === 'MEAN Developer' ? 'selected' : '' %>>MEAN Developer</option>
      <option value="Java Developer" class="text-secondary" <%= job.position === 'Java Developer' ? 'selected' : '' %>>Java Developer</option>
      <option value="Front-End Developer" class="text-secondary" <%= job.position === 'Front-End Developer' ? 'selected' : '' %>>Front-End Developer</option>
      <option value="Back-End Developer" class="text-secondary" <%= job.position === 'Back-End Developer' ? 'selected' : '' %>>Back-End Developer</option>
      <option value="Full-Stack Developer" class="text-secondary" <%= job.position === 'Full-Stack Developer' ? 'selected' : '' %>>Full-Stack Developer</option>
    </select>
  </div>
  <div class="col-12">
    <label for="location" class="form-label text-secondary">Enter job location</label>
    <input
      type="text"
      class="form-control text-secondary"
      id="job-location"
      aria-describedby="jobLocation"
      name="location"
      value="<%= job.location %>"
    />
  </div>
  <div class="input-group">
    <label for="company" class="form-label"></label>
    <span class="input-group-text text-secondary" id="company-name">Company Name</span>
    <input
      type="text"
      class="form-control text-secondary"
      id="company-name-input"
      aria-describedby="company-name"
      name="company"
      value="<%= job.company %>"
    />
  </div>
  <div class="input-group">
    <input
      type="number"
      class="form-control text-secondary"
      placeholder="Salary"
      aria-label="Salary"
      name="salary"
      value="<%= job.salary %>"
    />
    <span class="input-group-text text-secondary">Total Positions</span>
    <input
      type="number"
      class="form-control text-secondary"
      aria-label="Total Open Positions"
      value="<%= job.openings %>"
      min="1"
      max="100"
      step="1"
      name="openings"
    />
  </div>
  <div class="col-12">
    <label for="description" class="form-label text-secondary">Enter Job Description</label>
    <textarea
      class="form-control text-secondary"
      id="job-description"
      rows="3"
      name="description"
    ><%= job.description %></textarea>
  </div>

  <div class="input-group">
    <select
      multiple
      class="form-select"
      size="4"
      id="skills"
      aria-label="Skills Required"
      name="skills"
    >
      <option class="text-secondary">Select skills required</option>
      <option value="React" class="text-secondary" <%= job.skills.includes("React") ? "selected" : "" %>>React</option>
      <option value="NodeJS" class="text-secondary" <%= job.skills.includes("NodeJS") ? "selected" : "" %>>NodeJS</option>
      <option value="Angular" class="text-secondary" <%= job.skills.includes("Angular") ? "selected" : "" %>>Angular</option>
      <option value="ExpressJS" class="text-secondary" <%= job.skills.includes("ExpressJS") ? "selected" : "" %>>ExpressJS</option>
      <option value="EJS" class="text-secondary" <%= job.skills.includes("EJS") ? "selected" : "" %>>EJS</option>
      <option value="Java" class="text-secondary" <%= job.skills.includes("Java") ? "selected" : "" %>>Java</option>
      <option value="AWS" class="text-secondary" <%= job.skills.includes("AWS") ? "selected" : "" %>>AWS</option>
      <option value="HTML" class="text-secondary" <%= job.skills.includes("HTML") ? "selected" : "" %>>HTML</option>
      <option value="MongoDB" class="text-secondary" <%= job.skills.includes("MongoDB") ? "selected" : "" %>>MongoDB</option>
      <option value="Data Structures" class="text-secondary" <%= job.skills.includes("Data Structures") ? "selected" : "" %>>Data Structures</option>
      <option value="Springboot" class="text-secondary" <%= job.skills.includes("Springboot") ? "selected" : "" %>>Springboot</option>
      <option value="CSS" class="text-secondary" <%= job.skills.includes("CSS") ? "selected" : "" %>>CSS</option>
      <option value="JS" class="text-secondary" <%= job.skills.includes("JS") ? "selected" : "" %>>JS</option>
    </select>
    <span class="input-group-text text-secondary">Apply By</span>
    <input
      type="date"
      class="form-control text-secondary"
      placeholder="dd-mm-yyyy"
      aria-label="Apply By"
      name="applyBy"
      value="<%= job.applyBy %>"
    />
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-success w-100">Update Job</button>
  </div>
</form>
